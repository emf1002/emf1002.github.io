<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>Never Ever Stop Trying</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Never Ever Stop Trying">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Never Ever Stop Trying">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Never Ever Stop Trying">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="Never Ever Stop Trying" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/image/icon.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">MjLao</a></h1>
		</hgroup>

		
		<p class="header-subtitle">Happiness is a way station between too much and too little</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>標籤</li>
						
						<li>友情链接</li>
						
						
						<li>關於</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="/#" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="/#" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="/#" title="rss">rss</a>
					        
								<a class="zhihu" target="_blank" href="/#" title="zhihu">zhihu</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/android/" style="font-size: 10px;">android</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">奥巴马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">卡卡的美丽传说</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">本泽马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">吉格斯的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">习大大大不同</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">托蒂的博客</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">我是谁，我从哪里来，我到哪里去？我就是我，是颜色不一样的吃货…</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">MjLao</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="/image/icon.jpg" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">MjLao</h1>
			</hgroup>
			
			<p class="header-subtitle">Happiness is a way station between too much and too little</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="/#" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="/#" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="/#" title="rss">rss</a>
			        
						<a class="zhihu" target="_blank" href="/#" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/22/hello-world/" class="article-date">
  	<time datetime="2016-01-22T02:00:45.687Z" itemprop="datePublished">2016-01-22</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/22/hello-world/">Hello World</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick_Start"><a href="#Quick_Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create_a_new_post"><a href="#Create_a_new_post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run_server"><a href="#Run_server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate_static_files"><a href="#Generate_static_files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy_to_remote_sites"><a href="#Deploy_to_remote_sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Fragment" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/22/Fragment/" class="article-date">
  	<time datetime="2016-01-22T00:44:46.000Z" itemprop="datePublished">2016-01-22</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/22/Fragment/">Fragment</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1_u3001Android_Fragment"><a href="#1_u3001Android_Fragment" class="headerlink" title="1、Android Fragment"></a>1、Android Fragment</h3><p>首先注意发音：</p>
<blockquote>
<p>fragment : [‘frægm(ə)nt]</p>
</blockquote>
<p>字面含义：碎片；片断或不完整部分</p>
<p>产生的目的：</p>
<blockquote>
<p>为了适应不同尺寸，不同分辨率的屏幕，为某个界面增加独立的业务逻辑，可以在Activity中动态的添加、替换和移除某个Fragment</p>
</blockquote>
<p>有了Frament，原先Activity复杂的代码可以分别在Fragment中实现</p>
<h3 id="2_u3001Fragment__u751F_u547D_u5468_u671F"><a href="#2_u3001Fragment__u751F_u547D_u5468_u671F" class="headerlink" title="2、Fragment 生命周期"></a>2、Fragment 生命周期</h3><p><a href="http://developer.android.com/reference/android/app/Fragment.html" target="_blank" rel="external">官方解释</a>,照顾一下看不到的同学，贴过来：</p>
<blockquote>
<p>Though a Fragment’s lifecycle is tied to its owning activity, it has its own wrinkle on the standard activity lifecycle. It includes basic activity lifecycle methods such as onResume(), but also important are methods related to interactions with the activity and UI generation.<br>The core series of lifecycle methods that are called to bring a fragment up to resumed state (interacting with the user) are:<br><strong>onAttach(Activity)</strong> called once the fragment is associated with its activity.<br><strong>onCreate(Bundle)</strong> called to do initial creation of the fragment.<br><strong>onCreateView(LayoutInflater, ViewGroup, Bundle)</strong> creates and returns the view hierarchy associated with the fragment.<br><strong>onActivityCreated(Bundle) </strong>tells the fragment that its activity has completed its own Activity.onCreate().<br><strong>onViewStateRestored(Bundle)</strong> tells the fragment that all of the saved state of its view hierarchy has been restored.<br><strong>onStart()</strong> makes the fragment visible to the user (based on its containing activity being started).<br><strong>onResume()</strong> makes the fragment begin interacting with the user (based on its containing activity being resumed).  </p>
<p></p><p>As a fragment is no longer being used, it goes through a reverse series of callbacks:<br><strong>onPause()</strong> fragment is no longer interacting with the user either because its activity is being paused or a fragment operation is modifying it in the activity.<br><strong>onStop()</strong> fragment is no longer visible to the user either because its activity is being stopped or a fragment operation is modifying it in the activity.<br><strong>onDestroyView()</strong> allows the fragment to clean up resources associated with its View.<br><strong>onDestroy()</strong> called to do final cleanup of the fragment’s state.<br><strong>onDetach()</strong> called immediately prior to the fragment no longer being associated with its activity.</p>
</blockquote>
<p>看到这里是不是有点晕，这段英文描述应该还算简单清晰，如果看不懂说明你的英文水平时候提高一下了。</p>
<p>简单解释一下：</p>
<blockquote>
<p><strong>onAttach(Activity)</strong> : 当fragment关联到Activity时调用，新版代码中已经废弃，改为<strong>onAttach(Context context)</strong>，通过这个方法可以在fragment中拿到context，此处改动应该还是鼓励开发者在fragment中撇清与activity的关系，antivity的生命周期不应该由fragment控制。<br><strong>onCreate(Bundle):</strong>看下源码中的描述，在onAttach之后调用，在onCreate之前调用，此处的操作为初始化fragment<br> <strong>onCreateView(LayoutInflater, ViewGroup, Bundle):</strong> 创建并返回需要展示的视图，使用inflater.inflate()方法使用布局文件创建视图<br><strong>onActivityCreated(Bundle)：</strong> 通知fragment，它所在的activity.onCreate方法已经执行完成<br><strong>onViewStateRestored(Bundle):</strong> 通知fragment，之前保存的状态已经恢复，可以在这个方法恢复视图的状态，例如复选框的选中状态，调用时机为<strong>onActivityCreated</strong>之后，<strong>onStart</strong>之前<br><strong>onStart():</strong> 当fragment对用户可见时调用，通常与activity的start方法绑定  <strong>onResume():</strong> 当fragment处于可以与用户交互状态时调用，与activity的onResume方法绑定  </p>
</blockquote>
<p>当fragment不再被使用时，类似activity生命周期，会按照fragment创建相反的行为执行一系列方法：</p>
<blockquote>
<p><strong>onPause():</strong> 对应onResume,fragment不再处于可以与用户交互的状态<br><strong>onStop()：</strong> 对应onStart，fragment不再对用户可见<br><strong>onDestroyView()：</strong> 对应 onCreateView,清理相关视图资源<br><strong>onDestroy()：</strong> 对应onCreate,清理fragment相关状态<br><strong>onDetach()：</strong> 对应 onAttach,解除与activity的关联关系</p>
</blockquote>
<h3 id="3_u3001_u901A_u8FC7_u4EE3_u7801_u611F_u53D7_u4E00_u4E0B_u751F_u547D_u5468_u671F"><a href="#3_u3001_u901A_u8FC7_u4EE3_u7801_u611F_u53D7_u4E00_u4E0B_u751F_u547D_u5468_u671F" class="headerlink" title="3、通过代码感受一下生命周期"></a>3、通过代码感受一下生命周期</h3><p>布局文件 <strong>activity_main.xml</strong>  </p>
<pre><code>&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
android:layout_width=&quot;match_parent&quot;
android:layout_height=&quot;match_parent&quot;&gt;

&lt;fragment
    android:id=&quot;@+id/titles&quot;
    class=&quot;com.anzxy.fragmentlifecycle.FragmentA&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot; /&gt;
&lt;/FrameLayout&gt;
</code></pre><p>创建一各FramentA  ,加入生命周期方法名称打印</p>
<pre><code>public class FragmentA extends Fragment {

    private static final String TAG = FragmentA.class.getSimpleName();

    @Override
    public void onAttach(Context context) {
        super.onAttach(context);
        Log.i(TAG,&quot;onAttach&quot;);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.i(TAG, &quot;onCreate&quot;);
    }

    @Nullable
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        Log.i(TAG, &quot;onCreateView&quot;);
        return inflater.inflate(R.layout.fragment_a,null);

    }

    @Override
    public void onViewCreated(View view, @Nullable Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
        Log.i(TAG, &quot;onViewCreated&quot;);
    }

    @Override
    public void onViewStateRestored(@Nullable Bundle savedInstanceState) {
        super.onViewStateRestored(savedInstanceState);
        Log.i(TAG, &quot;onViewStateRestored&quot;);
    }

    @Override
    public void onStart() {
        super.onStart();
        Log.i(TAG, &quot;onStart&quot;);
    }

    @Override
    public void onResume() {
        super.onResume();
        Log.i(TAG, &quot;onResume&quot;);
    }

    @Override
    public void onPause() {
        super.onPause();
        Log.i(TAG, &quot;onPause&quot;);
    }

    @Override
    public void onStop() {
        super.onStop();
        Log.i(TAG, &quot;onStop&quot;);
    }

    @Override
    public void onDestroyView() {
        super.onDestroyView();
        Log.i(TAG, &quot;onDestroyView&quot;);
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        Log.i(TAG, &quot;onDestroy&quot;);
    }

    @Override
    public void onDetach() {
        super.onDetach();
        Log.i(TAG, &quot;onDetach&quot;);
    }
}
</code></pre><p>MainActivity类：  </p>
<pre><code>public class MainActivity extends AppCompatActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }
}
</code></pre><p>运行结果<br>&gt;<br>FragmentA: onAttach<br>FragmentA: onCreate<br>FragmentA: onCreateView<br>FragmentA: onViewCreated<br>FragmentA: onActivityCreated<br>FragmentA: onViewStateRestored<br>FragmentA: onStart<br>FragmentA: onResume<br><strong>点击返回键</strong><br>FragmentA: onPause<br>FragmentA: onStop<br>FragmentA: onDestroyView<br>FragmentA: onDestroy<br>FragmentA: onDetach  </p>
<p>在mainActivity加入Activity生命周期的执行</p>
<blockquote>
<p>MainActivity: ########## onCreate父类方法调用之前 ############<br>MainActivity: ########## setContentView方法调用之前 ############<br>FragmentA: onAttach<br>FragmentA: onCreate<br>FragmentA: onCreateView<br>FragmentA: onViewCreated<br>MainActivity: ########## setContentView方法调用之后 ############<br>MainActivity: ########## onStart父类方法调用之前 ############<br>FragmentA: onActivityCreated<br>FragmentA: onViewStateRestored<br>FragmentA: onStart<br>MainActivity: ########## onStart父类方法调用之后 ############<br>MainActivity: ########## onResume父类方法调用之前 ############<br>MainActivity: ########## onResume父类方法调用之后 ############<br>FragmentA: onResume<br><strong>点击返回按钮</strong><br>MainActivity: ########## onPause父类方法调用之前 ############<br>FragmentA: onPause<br>MainActivity: ########## onPause父类方法调用之后 ############<br>MainActivity: ########## onStop父类方法调用之前 ############<br>FragmentA: onStop<br>MainActivity: ########## onStop父类方法调用之后 ############<br>MainActivity: ########## onDestroy父类方法调用之前 ############<br>FragmentA: onDestroyView<br>FragmentA: onDestroy<br>FragmentA: onDetach<br>MainActivity: ########## onDestroy父类方法调用之后 ############  </p>
</blockquote>
<p>更改Fragment创建方式</p>
<pre><code>protected void onCreate(Bundle savedInstanceState) {
    Log.i(TAG, &quot;########## onCreate父类方法调用之前 ############&quot;);

    FragmentA fragmentA = new FragmentA();
    super.onCreate(savedInstanceState);
    FragmentTransaction transaction =  
        this.getSupportFragmentManager().beginTransaction();
    transaction.add(R.id.main_frame,fragmentA);
    transaction.commit();
    Log.i(TAG, &quot;########## setContentView方法调用之前 ############&quot;);
    setContentView(R.layout.activity_main);
    Log.i(TAG, &quot;########## setContentView方法调用之后 ############&quot;);
}
</code></pre><blockquote>
<p>MainActivity: ########## onCreate父类方法调用之前 ############<br>MainActivity: ########## setContentView方法调用之前 ############<br>MainActivity: ########## setContentView方法调用之后 ############<br>MainActivity: ########## onStart父类方法调用之前 ############<br>FragmentA: onAttach<br>FragmentA: onCreate<br>FragmentA: onCreateView<br>FragmentA: onViewCreated<br>FragmentA: onActivityCreated<br>FragmentA: onViewStateRestored<br>FragmentA: onStart<br>MainActivity: ########## onStart父类方法调用之后 ############<br>MainActivity: ########## onResume父类方法调用之前 ############<br>MainActivity: ########## onResume父类方法调用之后 ############<br>FragmentA: onResume<br><strong>点击返回按钮</strong><br>MainActivity: ########## onPause父类方法调用之前 ############<br>FragmentA: onPause<br>MainActivity: ########## onPause父类方法调用之后 ############<br>MainActivity: ########## onStop父类方法调用之前 ############<br>FragmentA: onStop<br>MainActivity: ########## onStop父类方法调用之后 ############<br>MainActivity: ########## onDestroy父类方法调用之前 ############<br>FragmentA: onDestroyView<br>FragmentA: onDestroy<br>FragmentA: onDetach<br>MainActivity: ########## onDestroy父类方法调用之后 ############  </p>
</blockquote>
<p></p><p>文章参考：<br><a href="http://blog.csdn.net/lmj623565791/article/details/37970961" target="_blank" rel="external">Android Fragment 真正的完全解析</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 MjLao
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>